{% extends 'base.html.twig' %}
{% import 'macros/alertes.html.twig' as utils %}

{% block body %}
  <header xmlns="http://www.w3.org/1999/html">
    {% include 'menu/main_nav.html.twig' with {'position': 'static'} %}
  </header>
  <div class="container trickDetail my-5">
    <div class="trickDetail_image_container">
      <img class="trickDetail_image" src="{{ asset('upload/') }}{{ trick.trickImages.first.src }}"
           alt="{{ trick.name }}" style="width:100%;">
      <div class="trickDetail_title_container">
        <span>{{ trick.name }}</span>
      </div>
    </div>

    {# MEdia #}
    <div class="lightbox my-3">
      <div class="multi-carousel">
        <div class="multi-carousel-inner">
          <div class="multi-carousel-item">
            <img src="https://dummyimage.com/365x160" class="w-100"/>
          </div>
          <div class="multi-carousel-item">
            <img src="https://dummyimage.com/365x160" class="w-100"/>
          </div>
          <div class="multi-carousel-item">
            <img src="https://dummyimage.com/365x160" class="w-100"/>
          </div>
          <div class="multi-carousel-item">
            <video class="w-100" autoplay="autoplay" controls>
              <source src="{{ asset('img/snowTrick.mp4') }}" type="video/mp4"/>
            </video>
          </div>
        </div>
        <button class="carousel-control-prev" type="button" tabindex="0" data-mdb-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        </button>
        <button class="carousel-control-next" type="button" tabindex="0" data-mdb-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
        </button>
      </div>
    </div>

    <div class="content my-3">
      <p>{{ trick.content | striptags('<p>') | raw }}</p>
    </div>

    <ul class="list-group list-group-horizontal justify-content-evenly">
      <li class="list-group-item">Catégorie : {{ trick.category.name }}</li>
      <li class="list-group-item">Crée le : {{ trick.createdAt | date('d/m/Y') }}</li>
      {# If it was updated, display : #}
      <li class="list-group-item">Modifié le : {{ trick.updatedAt is null ? 'Jamais' : trick.updatedAt|date
          ('d/m/Y') }}</li>
      {# endif #}
    </ul>

    <hr>
    {# If user is connected #}
    <form class="row g-3 justify-content-center">
      <div class="col-8">
        <label for="comment" class="visually-hidden">Password</label>
        <input type="text" class="form-control" id="comment">
      </div>
      <div class="col-auto">
        <button type="submit" class="btn btn-outline-secondary mb-3">Soumettre le commentaire</button>
      </div>
    </form>

    <hr>
    {# endif #}

    {% if trick.trickComments|length > 0 %}
      <span>Commentaires : </span><br/>
      <div class="container mt-5">
        <div class="d-flex justify-content-center row">
          {% for commentary in trick.trickComments %}

            <div class="col-md-8">
              <div class="d-flex flex-column comment-section">
                <div class="bg-white p-2">
                  <div class="d-flex flex-row user-info">
                    <img class="rounded-circle" src="https://i.imgur.com/RpzrMR2.jpg" width="40">
                    <div class="d-flex flex-column justify-content-start ml-2">
                      <span class="d-block font-weight-bold name">Marry Andrews</span>
                      <span class="date text-black-50">Shared publicly - Jan 2020</span>
                    </div>
                  </div>
                  <div class="mt-2">
                    <p class="comment-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
                      eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
                      quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
                  </div>
                </div>
                <div class="bg-white">
                  <div class="d-flex flex-row fs-12">
                    <div class="like p-2 cursor">
                      <i class="fa fa-thumbs-o-up"></i>
                      <span class="ml-1">Like</span>
                    </div>
                    <div class="like p-2 cursor">
                      <i class="fa fa-commenting-o"></i>
                      <span class="ml-1">Comment</span>
                    </div>
                    <div class="like p-2 cursor">
                      <i class="fa fa-share"></i>
                      <span class="ml-1">Share</span>
                    </div>
                  </div>
                </div>
                <div class="bg-light p-2">
                  <div class="d-flex flex-row align-items-start">
                    <img class="rounded-circle" src="https://i.imgur.com/RpzrMR2.jpg" width="40">
                    <textarea class="form-control ml-1 shadow-none textarea"></textarea>
                  </div>
                  <div class="mt-2 text-right">
                    <button class="btn btn-primary btn-sm shadow-none" type="button">Post comment</button>
                    <button class="btn btn-outline-primary btn-sm ml-1 shadow-none" type="button">Cancel
                    </button>
                  </div>
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
    {% else %}
      {{ utils.alert('Pas de commentaire', 'info') }}
    {% endif %}

  </div>
{% endblock %}

{% block additionnal_javascripts %}
  <script src="{{ asset('js/multi-carrousel.js') }}" type="text/javascript"></script>
{% endblock %}